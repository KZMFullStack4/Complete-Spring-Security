<script src="../../app.module.ts"></script>
<div class="component">
    <p-breadcrumb [model]="breadcrumbItems"></p-breadcrumb>

    <div class="modal-body">
        <jhi-alert-error></jhi-alert-error>
        <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    <label class="form-control-label" jhiTranslate="niopdcgatewayApp.voucherTemplate.voucherType"
                           for="field_voucherType">Voucher Type</label>
                    <select [disabled]="isView" class="form-control" id="field_voucherType" name="voucherType"
                            [(ngModel)]="voucherTemplate.voucherTypeId" required>
                        <option [ngValue]="null" selected></option>
                        <option [ngValue]="voucherTypeOption.id"
                                *ngFor="let voucherTypeOption of voucherTypes; trackBy: trackVoucherTypeById">
                            {{voucherTypeOption.voucherTypeGroupTitle+'-'+voucherTypeOption.title}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label class="form-control-label" jhiTranslate="niopdcgatewayApp.voucherTemplate.referrer"
                           for="field_referrer">Referrer</label>
                    <select class="form-control" name="referrer" [(ngModel)]="voucherTemplate.referrer"
                            (change)="onReferrerChange()"
                            [disabled]="voucherTemplate.voucherMappings && voucherTemplate.voucherMappings.length"
                            id="field_referrer" required>
                        <option value="BILL">{{'niopdcgatewayApp.Referrer.BILL' | translate}}</option>
                        <option value="ORDER">{{'niopdcgatewayApp.Referrer.ORDER' | translate}}</option>
                        <option value="NORMAL">{{'niopdcgatewayApp.Referrer.NORMAL' | translate}}</option>
                        <option value="VOUCHER_PAYMENT">{{'niopdcgatewayApp.Referrer.VOUCHER_PAYMENT' | translate}}
                        </option>
                    </select>
                </div>
            </div>
            <div class="col-xs-12 col-md-3">
                <div class="form-group">
                    <label jhiTranslate="niopdcgatewayApp.costGroup.authority"
                           for="field_authority">authority</label>
                    <p-multiSelect [disabled]="isView" class="form-control" id="field_authority"
                                   [options]="userTypes"
                                   required
                                   name="authority"
                                   [defaultLabel]="'global.messages.info.choose' | translate"
                                   [selectedItemsLabel]="('global.messages.info.selectedItems' | translate)"
                                   [(ngModel)]="voucherTemplate.access"
                                   [ngModelOptions]="{standalone: true}"
                    ></p-multiSelect>

                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group"><label class="form-control-label"
                                               jhiTranslate="niopdcgatewayApp.userDataAccess.location"
                                               for="location">Location</label>
                    <input-location-selector (selectedObject)="onLocationChange()" class="form-control" [idSelector]="true" [oneSelection]="false"
                                             [(ngModel)]="voucherTemplate.locationIds" [selectByPriority]="true" [selectOfLevel]="'all'"
                                             id="location" name="location"></input-location-selector>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label class="form-control-label" jhiTranslate="niopdcgatewayApp.voucherTemplate.voucherDateType"
                           for="field_voucherDateType">Voucher Date Type</label>
                    <select [disabled]="isView" class="form-control" id="field_voucherDateType" name="voucherDateType"
                            [(ngModel)]="voucherTemplate.voucherDateType" required>
                        <option [ngValue]="null" selected></option>
                        <option value="CREATE_DATE">{{'niopdcgatewayApp.voucherTemplate.voucherDateTypes.createDate' | translate}}</option>
                        <option value="AFTER_MONTH_DAY_FIRST_DATE">{{'niopdcgatewayApp.voucherTemplate.voucherDateTypes.afterMonthDayFirstDate' | translate}}</option>
                        <option value="LAST_DATE_OF_MONTH">{{'niopdcgatewayApp.voucherTemplate.voucherDateTypes.lastDateOfMonth' | translate}}</option>
                        <option value="FINISH_DATE">{{'niopdcgatewayApp.voucherTemplate.voucherDateTypes.finishDate' | translate}}
                    </select>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label jhiTranslate="niopdcgatewayApp.voucherTemplate.docBuildBeforeOperations"
                           for="field_docBuildBeforeOperations">docBuildBeforeOperations</label>
                    <p-multiSelect [disabled]="isView" class="form-control" id="field_docBuildBeforeOperations"
                                   [options]="docBuildBeforeOperationsTypes"
                                   [defaultLabel]="'global.messages.info.choose' | translate"
                                   [selectedItemsLabel]="('global.messages.info.selectedItems' | translate)"
                                   [(ngModel)]="voucherTemplate.docBuildBeforeOperations"
                                   [ngModelOptions]="{standalone: true}"
                    ></p-multiSelect>

                </div>
            </div>

            <div class="col-md-3">
                <div class="form-group">
                    <label jhiTranslate="niopdcgatewayApp.voucherTemplate.docBuildAfterOperations"
                           for="field_docBuildAfterOperations">docBuildAfterOperations</label>
                    <p-multiSelect [disabled]="isView" class="form-control" id="field_docBuildAfterOperations"
                                   [options]="docBuildAfterOperationsTypes"
                                   name="docBuildAfterOperations"
                                   [defaultLabel]="'global.messages.info.choose' | translate"
                                   [selectedItemsLabel]="('global.messages.info.selectedItems' | translate)"
                                   (onChange)="changeDocBuildAfterOperations()"
                                   [(ngModel)]="voucherTemplate.docBuildAfterOperations"

                    ></p-multiSelect>

                </div>
            </div>
            <div class="col-md-3" *ngIf="includeDocBuild || voucherTemplate.buildAfterVoucherTemplateId" >
                <div class="form-group">
                    <label jhiTranslate="niopdcgatewayApp.voucherTemplate.chooseVoucherTemplate">chooseVoucherTemplate</label>
                    <select class="form-control"  id="field_voucherTemplate" required
                            name="voucherTemplate"
                            [(ngModel)]="voucherTemplate.buildAfterVoucherTemplateId">
                        <option [ngValue]="null"></option>
                        <option
                            *ngFor="let voucherTemplateOption of voucherTemplates; trackBy: trackVoucherTypeById"
                            [ngValue]="voucherTemplateOption.id">
                            {{voucherTemplateOption.voucherTypeTitle + ' - ' + voucherTemplateOption.voucherTypeGroupTitle}}
                        </option>
                    </select>
                    <div class="form-group">
                        <label jhiTranslate="niopdcgatewayApp.voucherTemplate.chooseVoucherTemplateReverse">chooseVoucherTemplateReverse</label>
                        <input type="checkbox" [disabled]="isView" class="form-control" id="field_chooseVoucherTemplateReverse" name="chooseVoucherTemplateReverse"
                               [(ngModel)]="voucherTemplate.buildAfterVoucherTemplateReversed" />
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label jhiTranslate="niopdcgatewayApp.voucherTemplate.docBuildAgent"
                           for="field_docBuildAgent">docBuildAgent</label>
                    <p-multiSelect [disabled]="isView" class="form-control" id="field_docBuildAgent"
                                   [options]="docBuildAgentTypes"
                                   name="docBuildAgent"
                                   [defaultLabel]="'global.messages.info.choose' | translate"
                                   [selectedItemsLabel]="('global.messages.info.selectedItems' | translate)"
                                   [(ngModel)]="voucherTemplate.docBuildAgents"
                    ></p-multiSelect>

                </div>
            </div>
        </div>
        <!-- voucherMapping list -->
        <div class="card" [hidden]="voucherMappingCreate || voucherMappingEdit">
            <div class="card-header">
                <div class="row">
                    <h5 class="col-md-3"
                        jhiTranslate="niopdcgatewayApp.voucherMapping.home.title">
                        Create or edit
                    </h5>
                    <div class="col-md-8"></div>
                    <button type="button" class="btn btn-primary col-md-1" [hidden]="voucherMappingCreate"
                            (click)="newVoucherMapping()">
                        <span class="fa fa-plus"></span>
                        <span jhiTranslate="entity.action.create">Create</span>
                    </button>
                </div>
            </div>
            <div class="card-block">
                <p-dataTable
                    #dt
                    [value]="voucherTemplate.voucherMappings"
                    [immutable]="false"
                    [responsive]="true"
                    [stacked]="false"
                    [emptyMessage]="'global.messages.info.notCreated' | translate"
                >
                    <p-headerColumnGroup>
                        <p-row>
                            <p-column [style]="{'width':'120px'}" field="rowNo" [sortable]="true">
                                <ng-template pTemplate="header">
                                    <span jhiTranslate="niopdcgatewayApp.voucherMapping.rowNo">rowNo</span>
                                </ng-template>
                            </p-column>
                            <p-column field="baseQueryTitle" [sortable]="true">
                                <ng-template pTemplate="header">
                                    <span jhiTranslate="niopdcgatewayApp.voucherMapping.baseQuery">Base Query</span>
                                </ng-template>
                            </p-column>
                            <p-column styleClass="col-button"></p-column>
                        </p-row>
                    </p-headerColumnGroup>
                    <p-column field="rowNo"
                              [header]="'niopdcgatewayApp.voucherMapping.rowNo' | translate"></p-column>
                    <p-column field="baseQueryTitle"
                              [header]="'niopdcgatewayApp.voucherMapping.baseQuery' | translate"></p-column>
                    <p-column class="component">
                        <ng-template let-item="rowData" pTemplate="body">
                            <div class="btn-group" ngbDropdown placement="right">
                                <button type="button" class="btn btn-primary"
                                        (click)="updateVoucherMapping(item)">
                                    <span class="fa fa fa-edit"></span>
                                    <span jhiTranslate="entity.action.edit">edit</span>
                                </button>
                                <button class="btn btn-primary" *jhiHasAnyAuthorityDisabled="['ROLE_ADMIN']"
                                        ngbDropdownToggle></button>
                                <div class="dropdown-menu" ngbDropdownMenu>
                                    <button type="button" class="dropdown-item"
                                            (click)="removeVoucherMapping(item)">
                                        <span class="fa fa-remove"></span>
                                        <span jhiTranslate="entity.action.delete">delete</span>
                                    </button>
                                </div>
                            </div>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
        </div>
        <div *ngIf="!voucherMappingCreate && !voucherMappingEdit &&
                    (!voucherTemplate.voucherMappings || !voucherTemplate.voucherMappings.length)"
             class="alert alert-warning">
            لطفا نگاشت های سند را ایجاد کنید.
        </div>

        <div class="card" *ngIf="voucherMappingCreate || voucherMappingEdit">
            <div class="card-header">
                <div class="row">
                    <h5>
                        <span jhiTranslate="niopdcgatewayApp.voucherMapping.home.title"></span> -
                        <span *ngIf="voucherMappingCreate" jhiTranslate="entity.action.create"></span>
                        <span *ngIf="voucherMappingEdit" jhiTranslate="entity.action.update"></span>
                    </h5>
                </div>
            </div>
            <div class="card-block container">
                <div name="editVoucherMapping">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label class="form-control-label"
                                           jhiTranslate="niopdcgatewayApp.voucherMapping.rowNo"
                                           for="field_rowNo">Row No</label>
                                    <input type="number" class="form-control" name="rowNo" id="field_rowNo"
                                           [(ngModel)]="voucherMapping.rowNo" required/>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <label class="form-control-label"
                                       jhiTranslate="niopdcgatewayApp.voucherMapping.baseQuery"
                                       for="field_baseQuery">Base
                                    Query</label>
                                <div class="input-group">

                                    <select class="form-control textInput" id="field_baseQuery" name="baseQuery"
                                            (change)="baseQueryChange()"
                                            [(ngModel)]="voucherMapping.baseQueryId" required>
                                        <option [ngValue]="null" selected></option>
                                        <option [ngValue]="baseQueryOption.id"
                                                *ngFor="let baseQueryOption of baseQueries; trackBy: trackBaseQueryById">
                                            {{baseQueryOption.title}}
                                        </option>
                                    </select>
                                </div>
                            </div>

                        </div>

                        <div class="row">
                            <div class="col-md-6" *ngIf="parameterDate">
                                <label class="form-control-label" jhiTranslate="niopdcgatewayApp.baseQuery.date"
                                       for="field_date">Date</label>
                                <div class="d-flex">
                                    <ng2-datetimepicker [disableTime]="true" [rtlActive]="true"
                                                        id="field_date"
                                                        class="form-control"
                                                        name="date"
                                                        [(ngModel)]="date"
                                    >
                                    </ng2-datetimepicker>
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="parameterCustomer">
                                <label class="form-control-label" jhiTranslate="niopdcgatewayApp.baseQuery.customer"
                                       for="field_customer">customer</label>
                                <jhi-customer-selector
                                    [multiSelect]="false"
                                    [selectObject]="false"
                                    [disabled]="isView"
                                    [(ngModel)]="customerId"
                                    class="form-control"
                                    id="field_customer"
                                    name="field_customer"
                                >
                                </jhi-customer-selector>
                            </div>
                            <div class="col-md-6" *ngIf="parameterLocation  && baseCategory !== 'AIRPLANE'">
                                <div class="form-group">
                                    <label class="form-control-label" jhiTranslate="niopdcgatewayApp.baseQuery.location"
                                           for="field_location">Location</label>
                                    <input-location-selector
                                        [idSelector]="true"
                                        [oneSelection]="true"
                                        [selectByPriority]="true"
                                        class="form-control" id="field_location" name="location"
                                        [(ngModel)]="locationId"
                                    >
                                    </input-location-selector>
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="parameterLocation && baseCategory === 'AIRPLANE'">
                                <div class="form-group">
                                    <label  class="form-control-label"
                                            jhiTranslate="niopdcgatewayApp.baseQuery.locationAirplane"
                                            for="field_depotId">Depot
                                        Id</label>
                                    <select class="form-control"
                                            name="depotId"
                                            [disabled]="isView"
                                            [(ngModel)]="locationId"
                                            id="field_depotId"
                                    >
                                        <option [ngValue]="refuelCenter.id" *ngFor="let refuelCenter of refuelCenters">
                                            {{refuelCenter.persianTitle}}
                                        </option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="parameterStartDate">
                                <label class="form-control-label" jhiTranslate="niopdcgatewayApp.baseQuery.startDate"
                                       for="field_startDate">Date</label>
                                <div class="d-flex">
                                    <ng2-datetimepicker [disableTime]="true" [rtlActive]="true"
                                                        id="field_startDate"
                                                        class="form-control"
                                                        name="startDate"
                                                        [(ngModel)]="startDate"
                                    >
                                    </ng2-datetimepicker>
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="parameterFinishDate">
                                <label class="form-control-label" jhiTranslate="niopdcgatewayApp.baseQuery.finishDate"
                                       for="field_finishDate">Date</label>
                                <div class="d-flex">
                                    <ng2-datetimepicker [disableTime]="true" [rtlActive]="true"
                                                        id="field_finishDate"
                                                        class="form-control"
                                                        name="finishDate"
                                                        [(ngModel)]="finishDate"
                                    >
                                    </ng2-datetimepicker>
                                </div>
                            </div>
                        </div>

                        <div class="text-center" style="margin-top: 20px">
                            <button type="button" class="btn btn-info"
                                    [disabled]="voucherMapping.baseQueryId==null"
                                    (click)="runQuery()">
                                <span class="fa fa-search"></span>&nbsp;<span
                                jhiTranslate="entity.action.show">Save</span>
                            </button>
                        </div>

                        <kendo-grid *ngIf="voucherMapping.baseQueryId!=null&&config!=null"
                                    [data]="resultList"
                                    [resizable]="true"
                                    [scrollable]="true"
                                    width="100%"
                                    scrollable="scrollable">

                            <kendo-grid-column *ngFor="let col of cols" [field]="col.field" [title]="col.header"
                                               width="130">
                                <ng-template kendoGridGroupHeaderTemplatе></ng-template>
                            </kendo-grid-column>

                            <kendo-grid-messages
                                [pagerOf]="'report.pagerOf' | translate"
                                [pagerItems]="'report.pagerItems' | translate"
                                [groupPanelEmpty]="'report.headerMessage' | translate"
                                [noRecords]="'global.messages.info.emptyRecords' | translate"
                                [pagerItemsPerPage]="'report.pagerItemsPerPage' | translate">
                            </kendo-grid-messages>
                        </kendo-grid>

                        <br>
                        <p-tabView *ngIf="config!=null&&voucherMapping.baseQueryId">
                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.keyMap' | translate}} ({{voucherMapping.keyMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.keyMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateKeyMap"
                                                    (click)="newVoucherMappingKeyMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateKeyMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="keyMap.isElse"
                                                                 id="field_keyMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_keyMap_isElse"
                                                                 jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!keyMap.isElse" [(ngModel)]="keyMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_keyMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="keyMap.value = keyMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="keyMap"
                                                              id="field_keyMap_value"
                                                              [(ngModel)]="keyMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateKeyMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingKeyMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingKeyMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateKeyMap" [value]="voucherMapping.keyMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.keyMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingKeyMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingKeyMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.keyMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.suffixMap' | translate}} ({{voucherMapping.suffixMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.suffixMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateSuffixMap"
                                                    (click)="newVoucherMappingSuffixMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateSuffixMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="suffixMap.isElse"
                                                                 id="field_suffixMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_suffixMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!suffixMap.isElse" [(ngModel)]="suffixMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_suffixMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="suffixMap.value = suffixMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="suffixMap"
                                                              id="field_suffixMap_value"
                                                              [(ngModel)]="suffixMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateSuffixMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingSuffixMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingSuffixMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateSuffixMap" [value]="voucherMapping.suffixMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.suffixMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingSuffixMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingSuffixMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.suffixMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.accountNoMap' | translate}} ({{voucherMapping.accountNoMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.accountNoMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateAccountNoMap"
                                                    (click)="newVoucherMappingAccountNoMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateAccountNoMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="accountNoMap.isElse"
                                                                 id="field_accountNoMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_accountNoMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!accountNoMap.isElse" [(ngModel)]="accountNoMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_accountNoMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="accountNoMap.value = accountNoMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="accountNoMap.value = accountNoMap.value + accountNumberFormatFieldOption.format"
                                                                    *ngFor="let accountNumberFormatFieldOption of accountNumberFormats;">
                                                                <span>{{accountNumberFormatFieldOption.format}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="accountNoMap"
                                                              id="field_accountNoMap_value"
                                                              [(ngModel)]="accountNoMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateAccountNoMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingAccountNoMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingAccountNoMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateAccountNoMap" [value]="voucherMapping.accountNoMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.accountNoMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingAccountNoMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingAccountNoMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.accountNoMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.descriptionMap' | translate}} ({{voucherMapping.descriptionMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.descriptionMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>

                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateDescriptionMap"
                                                    (click)="newVoucherMappingDescriptionMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateDescriptionMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="descriptionMap.isElse"
                                                                 id="field_descriptionMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_descriptionMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!descriptionMap.isElse" [(ngModel)]="descriptionMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_descriptionMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="descriptionMap.value = descriptionMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="descriptionMap"
                                                              id="field_descriptionMap_value"
                                                              [(ngModel)]="descriptionMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateDescriptionMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingDescriptionMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingDescriptionMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateDescriptionMap" [value]="voucherMapping.descriptionMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.descriptionMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingDescriptionMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingDescriptionMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.descriptionMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.debitMap' | translate}} ({{voucherMapping.debitMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.debitMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateDebitMap"
                                                    (click)="newVoucherMappingDebitMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateDebitMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="debitMap.isElse"
                                                                 id="field_debitMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_debitMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!debitMap.isElse" [(ngModel)]="debitMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_debitMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="debitMap.value = debitMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="debitMap"
                                                              id="field_debitMap_value"
                                                              [(ngModel)]="debitMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateDebitMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingDebitMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingDebitMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateDebitMap" [value]="voucherMapping.debitMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.debitMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingDebitMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingDebitMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.debitMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.creditMap' | translate}} ({{voucherMapping.creditMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.creditMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateCreditMap"
                                                    (click)="newVoucherMappingCreditMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateCreditMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="creditMap.isElse"
                                                                 id="field_creditMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_creditMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!creditMap.isElse" [(ngModel)]="creditMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_creditMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="creditMap.value = creditMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="creditMap"
                                                              id="field_creditMap_value"
                                                              [(ngModel)]="creditMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateCreditMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingCreditMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingCreditMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateCreditMap" [value]="voucherMapping.creditMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.creditMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingCreditMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingCreditMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.creditMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.specialMap' | translate}} ({{voucherMapping.specialMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.specialMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateSpecialMap"
                                                    (click)="newVoucherMappingSpecialMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateSpecialMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="specialMap.isElse"
                                                                 id="field_specialMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_specialMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!specialMap.isElse" [(ngModel)]="specialMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_specialMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="specialMap.value = specialMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="specialMap"
                                                              id="field_specialMap_value"
                                                              [(ngModel)]="specialMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateSpecialMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingSpecialMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingSpecialMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateSpecialMap" [value]="voucherMapping.specialMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.specialMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingSpecialMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingSpecialMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.specialMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.extraMap' | translate}} ({{voucherMapping.extraMap.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.extraMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-8"></div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateExtraMap"
                                                    (click)="newVoucherMappingExtraMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateExtraMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                               <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="extraMap.isElse"
                                                                 id="field_extraMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_extraMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!extraMap.isElse" [(ngModel)]="extraMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_extraMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="extraMap.value = extraMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="extraMap"
                                                              id="field_extraMap_value"
                                                              [(ngModel)]="extraMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateExtraMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingExtraMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingExtraMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateExtraMap" [value]="voucherMapping.extraMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.extraMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingExtraMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingExtraMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.extraMap)}}</pre>
                                </div>
                            </p-tabPanel>

                            <p-tabPanel
                                header="{{'niopdcgatewayApp.voucherMapping.referenceMap' | translate}} ({{voucherMapping?.referenceMap?.length}})">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="row">
                                            <h5 class="col-md-3"
                                                jhiTranslate="niopdcgatewayApp.voucherMapping.referenceMap">
                                                Create or edit
                                            </h5>
                                            <div class="col-md-5"></div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="form-control-label" jhiTranslate="niopdcgatewayApp.voucherMapping.referenceType"
                                                           for="field_referrer">referenceType</label>
                                                    <select class="form-control" name="referenceType" [(ngModel)]="voucherTemplate.referenceType"
                                                            id="field_referenceType" required>
                                                        <option value="ORDER">{{'niopdcgatewayApp.voucherMapping.order' | translate}}</option>
                                                        <option value="RECEIPT">{{'niopdcgatewayApp.voucherMapping.receipt' | translate}}</option>
                                                        <option value="RATEDIFFERENCE">{{'niopdcgatewayApp.voucherMapping.rateDifference' | translate}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary col-md-1"
                                                    [hidden]="voucherMappingCreateReferenceMap"
                                                    (click)="newVoucherMappingReferenceMap()">
                                                <span class="fa fa-plus"></span>
                                                <span jhiTranslate="entity.action.create">Create</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-block container" [hidden]="!voucherMappingCreateReferenceMap">
                                        <div name="editFormProduct">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.condition"></label>
                                                    <span><input type="checkbox" [(ngModel)]="referenceMap.isElse"
                                                                 id="field_referenceMap_isElse"
                                                    ></span>
                                                    <span>
                                                        <label class="form-control-label" for="field_referenceMap_isElse"
                                                               jhiTranslate="niopdcgatewayApp.voucherMapping.isElse"></label>
                                                    </span>
                                                    <query-builder *ngIf="!referenceMap.isElse" [(ngModel)]="referenceMap.map" [config]="config">
                                                        <ng-container *queryInput="let rule; type: 'string'">
                                                            <div style="direction: ltr" class="input-group">
                                                                <input class="textInput form-control" [(ngModel)]="rule.value"/>
                                                                <div class="btn-group input-group-append" ngbDropdown placement="left">
                                                                    <button class="q-button" ngbDropdownToggle>
                                                                        <i class="q-icon q-add-icon"></i> افزودن
                                                                    </button>
                                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                                        <button type="button" class="dropdown-item"
                                                                                (click)="rule.value = (rule.value ? rule.value : '') + '['+baseQueryFieldOption+']'"
                                                                                *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                            <span>{{baseQueryFieldOption}}</span>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                    </query-builder>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label class="form-control-label"
                                                           jhiTranslate="niopdcgatewayApp.voucherMapping.value"
                                                           for="field_referenceMap_value">Row No Map</label>
                                                    <div class="btn-group" ngbDropdown placement="left">
                                                        <button class="q-button" ngbDropdownToggle>
                                                            <i class="q-icon q-add-icon"></i> افزودن
                                                        </button>
                                                        <div class="dropdown-menu" ngbDropdownMenu>
                                                            <button type="button" class="dropdown-item"
                                                                    (click)="referenceMap.value = referenceMap.value + '['+baseQueryFieldOption+']'"
                                                                    *ngFor="let baseQueryFieldOption of baseQueryFields;">
                                                                <span>{{baseQueryFieldOption}}</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <textarea style="direction: ltr" [disabled]="isView" type="text"
                                                              class="form-control"
                                                              name="referenceMap"
                                                              id="field_referenceMap_value"
                                                              [(ngModel)]="referenceMap.value"
                                                              required >
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer" [hidden]="!voucherMappingCreateReferenceMap">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                                (click)="cancelVoucherMappingReferenceMap()">
                                            <span class="fa fa-ban"></span>&nbsp;<span
                                            jhiTranslate="entity.action.cancel">Cancel</span>
                                        </button>
                                        <button type="button" class="btn btn-primary"
                                                [disabled]="isSaving"
                                                (click)="addVoucherMappingReferenceMap()">
                                            <span class="fa fa-save"></span>&nbsp;<span
                                            jhiTranslate="entity.action.save">Save</span>
                                        </button>
                                    </div>
                                    <p-dataTable [hidden]="voucherMappingCreateReferenceMap" [value]="voucherMapping.referenceMap"
                                                 [immutable]="false" [responsive]="true" [stacked]="false">
                                        <p-column field="value"
                                                  [header]="'niopdcgatewayApp.voucherMapping.referenceMap' | translate">
                                        </p-column>
                                        <p-column class="component" styleClass="col-button">
                                            <ng-template let-item="rowData" pTemplate="body">
                                                <div class="btn-group" ngbDropdown placement="right">
                                                    <button type="button" class="btn btn-primary"
                                                            (click)="updateVoucherMappingReferenceMap(item)">
                                                        <span class="fa fa fa-edit"></span>
                                                        <span jhiTranslate="entity.action.edit">edit</span>
                                                    </button>
                                                    <button class="btn btn-primary" ngbDropdownToggle></button>
                                                    <div class="dropdown-menu" ngbDropdownMenu>
                                                        <button type="button" class="dropdown-item"
                                                                (click)="removeVoucherMappingReferenceMap(item)">
                                                            <span class="fa fa-remove"></span>
                                                            <span jhiTranslate="entity.action.delete">delete</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </p-column>
                                    </p-dataTable>
                                    <pre class="alert alert-success" style="direction: rtl;text-align: left" >{{this.mapQuery(this.voucherMapping.referenceMap)}}</pre>
                                </div>
                            </p-tabPanel>


                        </p-tabView>

                        <br>
                        <div class="text-center" *ngIf="config!=null&&voucherMapping.baseQueryId && resultList">
                            <button type="button" class="btn btn-info"
                                    [disabled]="isSaving"
                                    (click)="showQuery()">
                                <span class="fa fa-search"></span>&nbsp;<span
                                jhiTranslate="entity.action.show">Save</span>
                            </button>
                        </div>

                        <br>
                        <kendo-grid *ngIf="config!=null&&voucherMapping.baseQueryId && resultList"
                                    [data]="mapResultList"
                                    [resizable]="true"
                                    [scrollable]="true"
                                    width="100%"
                                    scrollable="scrollable">

                            <kendo-grid-column *ngFor="let col of mapCols" [field]="col.field" [title]="col.header"
                                               width="130">
                                <ng-template kendoGridGroupHeaderTemplatе></ng-template>
                            </kendo-grid-column>

                            <kendo-grid-messages
                                [pagerOf]="'report.pagerOf' | translate"
                                [pagerItems]="'report.pagerItems' | translate"
                                [groupPanelEmpty]="'report.headerMessage' | translate"
                                [noRecords]="'global.messages.info.emptyRecords' | translate"
                                [pagerItemsPerPage]="'report.pagerItemsPerPage' | translate">
                            </kendo-grid-messages>
                        </kendo-grid>

                    </div>
                </div>
            </div>
            <div class="card-footer"
                 [hidden]="
                 !voucherMappingCreate && !voucherMappingEdit
                 ||(voucherMappingCreateExtraMap||voucherMappingCreateSpecialMap||voucherMappingCreateCreditMap||voucherMappingCreateDebitMap||voucherMappingCreateDescriptionMap||voucherMappingCreateDescriptionMap||voucherMappingCreateAccountNoMap||voucherMappingCreateSuffixMap||voucherMappingCreateKeyMap)"
            >
                <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cancelVoucherMapping()">
                    <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
                </button>
                <button type="button" class="btn btn-primary"
                        [disabled]="isSaving"
                        (click)="addVoucherMapping()">
                    <span class="fa fa-save"></span>&nbsp;<span
                    jhiTranslate="entity.action.save">Save</span>
                </button>

            </div>

        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="clear()">
            <span class="fa fa-ban"></span>&nbsp;<span jhiTranslate="entity.action.cancel">Cancel</span>
        </button>
        <button *ngIf="!isView" type="submit" [disabled]="isSaving || voucherMappingCreate || voucherMappingEdit ||
                (!voucherTemplate.voucherMappings||!voucherTemplate.voucherMappings.length)" (click)="save()"
                class="btn btn-primary">
            <span class="fa fa-save"></span>&nbsp;<span jhiTranslate="entity.action.save">Save</span>
        </button>
    </div>
</div>
